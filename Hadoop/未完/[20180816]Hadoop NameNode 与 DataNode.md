
HDFS 集群有两类节点：管理节点（NameNode）与工作节点（DataNode）。NameNode 管理文件系统的命名空间。它维护着文件系统树以及整棵树内的所有文件和目录。这些信息以两个文件形式永久保存在本地磁盘上：命名空间镜像文件和编辑日志文件。NameNode 也记录着每个文件中各个块所在数据节点信息，但它并不永久保存块的位置信息，因为这些信息会在系统启动时根据节点信息重建。

客户端代表用户通过与 NameNode 和 DataNode　交互访问整个文件系统。客户端提供一个类似于 POSIX （可移植操作系统界面）的文件系统接口，因此用户在编程时无需知道 NameNode 和 DataNode 也可实现其功能。

DataNode 是文件系统的工作节点。他们根据需要存储并检索数据块（受客户端或 NameNode 调度），并且定期向 NameNode 发送它们所存储的块的列表。

没有 NameNode ，文件系统将无法使用。如果运行 NameNode 服务的机器毁坏，文件系统上所有的文件将会丢失，因为我们不知道如何根据 DataNode 的块重建文件。因此，对 NameNode 实现容错非常重要，Hadoop 为此提供了两种机制。

第一种机制是备份那些组成文件系统元数据持久状态的文件。Hadoop 可以通过配置使 NameNode 在多个文件系统上保存元数据的持久状态。这些写操作是实时同步的，且是原子操作。一般的配置是，将持久状态自恶如本地磁盘的同时，写入一个远程挂载的网络文件系统（NFS）。

另一种可行的方法是运行一个辅助 NameNode ，但它不能被用作 NameNode 。这个辅助 NameNode 的重要作用是定期合并编辑日志与命名空间镜像，以防止编辑日志过大。这个辅助 NameNode 一般在另一台单独的物理计算机上运行，因为它需要占用大量 CPU 时间，并且需要与 NameNode 一样多的内存来执行合并操作。它会保存合并后的命名空间镜像的副本，并在 NameNode 发生故障时启用。但是，辅助 NameNode 保存的状态总是滞后于主节点，所以在主节点全部失效时，难免会丢失部分数据。在这种情况下，一般把存储在 NFS 上的 NameNode 元数据复制到辅助 NameNode 并作为新的主 NameNode 运行。

> 也可以运行热备份 NameNode 代替运行辅助 NameNode。


## 1. JavaCC 介绍

### 1.1 JavaCC 和解析器生成

JavaCC 是一个解析器生成器和词法分析器生成器。解析器和词法分析器是处理字符序列输入的软件组件。编译器(Compilers)和解释器(Interpreters)结合词法分析器和解析器来解密包含程序的文件，然而，词法分析器和解析器可以用于各种各样的其他应用程序，正如我希望本书中的示例将说明的那样。那么什么是解析器和词法分析器呢?词法分析器可以将字符序列分解成成为 Token 的字符子序列，同时还会对 Token 进行分类。如下是一个用C语言编写的短程序：
```c
int main() {
  return 0 ;
}
```
C 语言编译器的词法分析器会将其分解为如下 Token：
```
"int", " ", "main", "(", ")",
" ", "{", "\n", "\t", "return"
" ", "0", " ", ";", "\n",
"}", "\n", ""
```
词法分析器还会识别每个 Token 的类型。上面示例中的 Token 对应的种类分别如下所示：
```
KWINT, SPACE, ID, OPAR, CPAR,
SPACE, OBRACE, SPACE, SPACE, KWRETURN,
SPACE, OCTALCONST, SPACE, SEMICOLON, SPACE,
CBRACE, SPACE, EOF
```
EOF 类型的 Token 表示原始文件的结束。词法分析器分解出的 Token 序列会传递给解析器。在 C 语言中，解析器不需要所有的 Token。在我们的示例中，那些被分类为 SPACE 的不会传递给解析器。解析器然后分析 Token 序列来确定程序的结构。通常在编译器，解析器输出一个表示程序结构的树。然后这棵树作为编译器(负责分析和代码生成)组件的输入。如下是程序中的一条简单语句：
```
fahrenheit = 32.0 + 9.0 * celcius / 5.0 ;
```
解析器根据语言规则分析语句，并生成一个树。

> DIAGRAM TBD

词法分析器和解析器还负责在输入不符合语言的词法或句法规则时生成错误消息。

JavaCC 本身不是解析器或词法分析器，而是生成器。这意味着它根据从文件中读取的规范输出词法分析器和解析器。JavaCC 生成用 Java 编写的词法分析器和解析器。

> 见图TBD

解析器和词法分析器往往是代码非常长而且非常复杂的组件。直接用 Java 编写一个高效的词法分析器或解析器必须谨慎考虑规则之间的交互。例如，在C语言的词法分析器中，处理整数常量和浮点常量的代码不能分割，因为整数常量开始时与浮点常量相同。如果使用像 JavaCC 这样的解析器生成器，整数常量和浮点常量的规则分别编写，并在生成过程中提取它们之间的通用性。与手工编写的 Java 程序相比，这种增加的模块化意味着规范文件更容易编写、读取和修改。通过使用像 JavaCC 这样的解析器生成器，软件工程师可以节省大量的时间，聚焦软件组件本身的质量。

## 1.2 A first example — adding integers



> 原文:[javacc-tutorial](https://www.engr.mun.ca/~theo/JavaCC-Tutorial/javacc-tutorial.pdf)

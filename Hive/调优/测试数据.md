
## 1. 订单表

| id | user_id | product_id | province_id | create_time | product_num | total_amount |
| :------------- | :------------- | :------------- | :------------- | :------------- | :------------- | :------------- |
| 订单id | 用户id | 商品id | 省份id | 下单时间 | 商品件数 | 订单金额 |

> 20000000

### 1.1 创建表

```sql
drop table if exists tb_order;
create table tb_order (
    id           string comment '订单id',
    user_id      string comment '用户id',
    product_id   string comment '商品id',
    province_id  string comment '省份id',
    create_time  string comment '下单时间',
    product_num  int comment '商品件数',
    total_amount decimal(16, 2) comment '下单金额'
)
partitioned by (dt string)
row format delimited
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n';
```

### 1.2 数据装载

执行如下导入语句将 `order_detail.txt` 文件导入到 tb_order 表中:
```sql
load data local inpath '/opt/data/order_detail.txt' overwrite into table tb_order partition(dt='2020-06-14');
```

## 2. 支付表(600w条数据)

| id | order_id | user_id | payment_time | total_amount |
| :------------- | :------------- | :------------- | :------------- | :------------- |
| 支付id | 订单id | 用户id | 支付时间 | 订单金额 |

### 2.1 创建表

```sql
drop table if exists tb_payment;
create table tb_payment(
    id              string comment '支付id',
    order_id        string comment '订单id',
    user_id         string comment '用户id',
    payment_time    string comment '支付时间',
    total_amount    decimal(16, 2) comment '支付金额'
)
partitioned by (dt string)
row format delimited
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n';
```

### 2.2 数据装载

执行如下导入语句将 `payment_detail.txt` 文件导入到 tb_payment 表中:
```sql
load data local inpath '/opt/data/payment_detail.txt' overwrite into table tb_payment partition(dt='2020-06-14');
```

## 3. 商品信息表(100w条数据)

| id | product_name | price | category_id |
| :------------- | :------------- | :------------- | :------------- |
| 商品id | 商品名称 | 价格 | 分类id |

### 3.1 建表语句

```sql
drop table if exists tb_product;
create table tb_product(
    id           string comment '商品id',
    product_name string comment '商品名称',
    price        decimal(16, 2) comment '价格',
    category_id  string comment '分类id'
)
partitioned by (dt string)
row format delimited
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n';
```

### 3.2 数据装载

执行如下导入语句将 `product_info.txt` 文件导入到 tb_product 表中:
```sql
load data local inpath '/opt/data/product_info.txt' overwrite into table tb_product partition(dt='2020-06-14');
```

## 4. 省份信息表(34条数据)

| id | province_name |
| :------------- | :------------- |
| 省份id | 省份名称 |

### 4.1 建表语句

```sql
create table tb_province(
    id            string comment '省份id',
    province_name string comment '省份名称'
)
row format delimited
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n';
```

### 4.2 数据装载

执行如下导入语句将 `province_info.txt` 文件导入到 tb_province 表中:
```sql
load data local inpath '/opt/data/province_info.txt' overwrite into table tb_province;
```

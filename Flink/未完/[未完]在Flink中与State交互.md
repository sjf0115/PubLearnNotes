

### 1. 什么是状态?

为了给这篇文章其余部分定下基调，我们首先解释一下流处理中什么是状态。当谈及有状态流处理时，状态包括应用程序或流处理引擎将在事件和流之间记住的信息，这是通过系统的更多实时（无界）和/或脱机（有界）数据流。几乎所有的应用程序本质上都是有状态的。甚至是简单的 COUNT 操作也是有状态的，当计数到 10 时，我们需要记住我们已经计数到 9。

为了更好地了解 Flink 如何管理状态，可以可以将 Flink 理解为三层状态抽象，如下图所示：
![]()

Flink 用户代码位于最顶层，例如，包含值状态的 KeyedProcessFunction。这是一个简单的变量，其值状态注释使它可以在运行时自动容错，重新缩放和查询。这些变量由位于堆或磁盘上的可配置的状态后端（RocksDB状态后端）提供支持。并提供每条记录计算的数据本地性，与计算和速度更接近。最后，当我们涉及升级，引入新功能或错误修复，并保持现有状态不变时，这就是引入保存点的目的。


















英译对照：
- 状态：state

原文：[State Unlocked: Interacting with State in Apache Flink](https://flink.apache.org/news/2020/01/29/state-unlocked-interacting-with-state-in-apache-flink.html)
